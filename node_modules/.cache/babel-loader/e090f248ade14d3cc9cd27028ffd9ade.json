{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { useBetween } from 'use-between';\nimport { ShareablePopSizeState } from './PopSlider.js';\nimport { ShareableProbeParams } from './Buttons.js';\nimport NodeFetch from 'node-fetch';\nexport const ShareableRunningState = () => {\n  _s();\n\n  const [running, setRunning] = useState(false);\n  return {\n    running,\n    setRunning\n  };\n};\n\n_s(ShareableRunningState, \"GqSjlWMyRcFSNk6JAdDkMp9357M=\");\n\n_c = ShareableRunningState;\nexport const ShareableFinishedState = () => {\n  _s2();\n\n  const [finished, setFinished] = useState(false);\n  return {\n    finished,\n    setFinished\n  };\n};\n\n_s2(ShareableFinishedState, \"mZBoEqN32gr4012eGv/dCEBa7uo=\");\n\n_c2 = ShareableFinishedState;\nexport const ShareableOutputState = () => {\n  _s3();\n\n  const [output, setOutput] = useState(null);\n  return {\n    output,\n    setOutput\n  };\n};\n\n_s3(ShareableOutputState, \"ppWByPgNJ+PeYTAdgwjKOSbvJUE=\");\n\n_c3 = ShareableOutputState;\nexport const ShareableWarningState = () => {\n  _s4();\n\n  const [warning, setWarning] = useState('');\n  return {\n    warning,\n    setWarning\n  };\n};\n\n_s4(ShareableWarningState, \"QgWVaa52qMHZiqsy7aSwVP0Ecac=\");\n\n_c4 = ShareableWarningState;\n\nasync function runOptimizer(finalParams, popSize) {\n  var endPoint = process.env.REACT_APP_ENDPOINTADDRESS.concat('/start_optimizer');\n  finalParams.params.temperature = parseFloat(finalParams.params.temperature);\n  finalParams.params.sodium = parseFloat(finalParams.params.sodium) / 1000.0;\n  finalParams.params.magnesium = parseFloat(finalParams.params.magnesium) / 1000.0;\n  return NodeFetch(endPoint, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    method: 'POST',\n    body: JSON.stringify({\n      'probeParams': finalParams,\n      'popSize': popSize\n    })\n  }).then(response => {\n    console.log(response); // AWS API Gateway will generally timeout before the optimizer is finished. This is normal behavior.\n\n    if (response.status === 408 || response.status === 504) {\n      return {\n        running: 'true'\n      };\n    } // Other errors when connecting to AWS\n    else if (response.status >= 400) {\n        return {\n          running: 'true'\n        }; //throw new Error('Bad response from server');\n      } else {\n        return response.json();\n      }\n  });\n}\n\nasync function getOutput(finalParams, popSize, attempt, maxAttempts) {\n  var endPoint = process.env.REACT_APP_ENDPOINTADDRESS.concat('/get_output');\n  finalParams.params.temperature = parseFloat(finalParams.params.temperature);\n  finalParams.params.sodium = parseFloat(finalParams.params.sodium);\n  finalParams.params.magnesium = parseFloat(finalParams.params.magnesium);\n  return NodeFetch(endPoint, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    method: 'POST',\n    body: JSON.stringify({\n      'probeParams': finalParams,\n      'popSize': popSize\n    })\n  }).then(response => {\n    console.log(response);\n\n    if (response.status >= 400 && attempt > maxAttempts) {\n      throw new Error('Bad response from server');\n    } else if (response.status >= 400) {\n      return {\n        status: 'error'\n      };\n    } else {\n      return response.json();\n    }\n  });\n}\n\nconst Optimizer = () => {\n  _s5();\n\n  const maxReattempts = 5;\n  const {\n    probeParams\n  } = useBetween(ShareableProbeParams);\n  const {\n    running,\n    setRunning\n  } = useBetween(ShareableRunningState);\n  const {\n    setFinished\n  } = useBetween(ShareableFinishedState);\n  const {\n    setOutput\n  } = useBetween(ShareableOutputState);\n  const {\n    popSize\n  } = useBetween(ShareablePopSizeState);\n  const {\n    setWarning\n  } = useBetween(ShareableWarningState);\n  const [attempts, setAttempts] = useState(0);\n  const [finalParams] = useState(JSON.parse(JSON.stringify(probeParams)));\n  const [finalPopSize] = useState(JSON.parse(JSON.stringify(popSize))); // Run on mount\n\n  useEffect(() => {\n    let mounted = true;\n    var startTime = Date.now(); // Start Optimizer\n\n    runOptimizer(finalParams, finalPopSize).then(output => {\n      if (mounted) {\n        setOutput(output);\n        setFinished(true);\n        setRunning(false);\n      }\n    }).catch(err => {\n      console.log(err); //setWarning('An error occurred while connecting to the optimization server. Please try again.');\n      //setFinished(false);\n      //setRunning(false);\n    }); // Periodically check output\n\n    var interval = setInterval(async () => {\n      try {\n        var output = await getOutput(finalParams, finalPopSize, attempts, maxReattempts);\n        var elapsedTime = Date.now() - startTime;\n        console.log(output);\n\n        if (output.hasOwnProperty('status')) {\n          if (output.status === 'error') {\n            if (mounted) {//setAttempts(attempts + 1);\n            }\n          }\n        } else if (output.running === 'false') {\n          console.log('done');\n\n          if (mounted) {\n            console.log('mounted');\n            setOutput(output);\n            setFinished(true);\n            setRunning(false);\n            console.log(running);\n            clearInterval(interval);\n            return () => mounted = false;\n          }\n        } // Timeout after 5 minutes\n        else if (elapsedTime > 300000) {\n            throw new Error('Optimization run timeout');\n          }\n      } catch (err) {\n        console.log(err);\n\n        if (elapsedTime > 300000) {\n          setWarning('Optimization run timed out. Please try again.');\n          clearInterval(interval);\n          setFinished(false);\n          setRunning(false);\n        }\n      }\n    }, 5000); //clearInterval(interval);\n\n    return () => {\n      mounted = false;\n      clearInterval(interval);\n    }; // eslint-disable-next-line \n  }, []);\n  return null;\n};\n\n_s5(Optimizer, \"jydFQPju/Bd/3Zs4dX9eCZgX1lY=\", false, function () {\n  return [useBetween, useBetween, useBetween, useBetween, useBetween, useBetween];\n});\n\n_c5 = Optimizer;\nexport default Optimizer;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"ShareableRunningState\");\n$RefreshReg$(_c2, \"ShareableFinishedState\");\n$RefreshReg$(_c3, \"ShareableOutputState\");\n$RefreshReg$(_c4, \"ShareableWarningState\");\n$RefreshReg$(_c5, \"Optimizer\");","map":{"version":3,"sources":["/home/leland/MLPractice/snp-lamp-design-client/src/Optimizer.js"],"names":["useState","useEffect","useBetween","ShareablePopSizeState","ShareableProbeParams","NodeFetch","ShareableRunningState","running","setRunning","ShareableFinishedState","finished","setFinished","ShareableOutputState","output","setOutput","ShareableWarningState","warning","setWarning","runOptimizer","finalParams","popSize","endPoint","process","env","REACT_APP_ENDPOINTADDRESS","concat","params","temperature","parseFloat","sodium","magnesium","headers","method","body","JSON","stringify","then","response","console","log","status","json","getOutput","attempt","maxAttempts","Error","Optimizer","maxReattempts","probeParams","attempts","setAttempts","parse","finalPopSize","mounted","startTime","Date","now","catch","err","interval","setInterval","elapsedTime","hasOwnProperty","clearInterval"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { useEffect } from 'react';\nimport { useBetween } from 'use-between';\nimport { ShareablePopSizeState } from './PopSlider.js';\nimport { ShareableProbeParams } from './Buttons.js';  \nimport NodeFetch from 'node-fetch';\n\nexport const ShareableRunningState = () => {\n    const [running, setRunning] = useState(false);\n    return {\n        running,\n        setRunning\n    };\n};\n\nexport const ShareableFinishedState = () => {\n    const [finished, setFinished] = useState(false);\n    return {\n        finished,\n        setFinished\n    };\n};\n\nexport const ShareableOutputState = () => {\n    const [output, setOutput] = useState(null);\n    return {\n        output,\n        setOutput\n    };    \n};\n\nexport const ShareableWarningState = () => {\n    const [warning, setWarning] = useState('');\n    return {\n        warning,\n        setWarning\n    };    \n};\n\nasync function runOptimizer(finalParams, popSize) {\n    var endPoint = process.env.REACT_APP_ENDPOINTADDRESS.concat('/start_optimizer');\n    finalParams.params.temperature = parseFloat(finalParams.params.temperature);\n    finalParams.params.sodium = parseFloat(finalParams.params.sodium)/1000.0;\n    finalParams.params.magnesium = parseFloat(finalParams.params.magnesium)/1000.0;\n    return NodeFetch(endPoint,\n    {\n        headers: { 'Content-Type': 'application/json' },\n        method: 'POST',\n        body: JSON.stringify({'probeParams': finalParams, 'popSize': popSize})\n    }).then(response => {\n        console.log(response); \n        // AWS API Gateway will generally timeout before the optimizer is finished. This is normal behavior.\n        if(response.status === 408 || response.status === 504) {\n            return {running: 'true'};\n        }\n        // Other errors when connecting to AWS\n        else if(response.status >= 400) {\n            return {running: 'true'};\n            //throw new Error('Bad response from server');\n        }\n        else {\n            return response.json();\n        }\n    })\n}\n\nasync function getOutput(finalParams, popSize, attempt, maxAttempts) {\n    var endPoint = process.env.REACT_APP_ENDPOINTADDRESS.concat('/get_output');\n    finalParams.params.temperature = parseFloat(finalParams.params.temperature);\n    finalParams.params.sodium = parseFloat(finalParams.params.sodium);\n    finalParams.params.magnesium = parseFloat(finalParams.params.magnesium);\n    return NodeFetch(endPoint,\n    {\n        headers: { 'Content-Type': 'application/json' },\n        method: 'POST',\n        body: JSON.stringify({'probeParams': finalParams, 'popSize': popSize})\n    }).then(response => {\n        console.log(response); \n        if(response.status >= 400 && attempt > maxAttempts) {\n            throw new Error('Bad response from server');\n        }\n        else if (response.status >= 400) { \n            return {status: 'error'};\n        }\n        else {\n            return response.json();\n        }\n    })    \n}\n\nconst Optimizer = () => {\n\n    const maxReattempts = 5;\n\n    const { probeParams } = useBetween(ShareableProbeParams);\n    const { running, setRunning } = useBetween(ShareableRunningState);\n    const { setFinished } = useBetween(ShareableFinishedState);\n    const { setOutput } = useBetween(ShareableOutputState);\n    const { popSize } = useBetween(ShareablePopSizeState);\n    const { setWarning } = useBetween(ShareableWarningState);\n    const [attempts, setAttempts] = useState(0);\n    const [finalParams, ] = useState(JSON.parse(JSON.stringify(probeParams)));\n    const [finalPopSize, ] = useState(JSON.parse(JSON.stringify(popSize)));\n\n    // Run on mount\n    useEffect(() => {\n        let mounted = true;\n        var startTime = Date.now();\n        // Start Optimizer\n        runOptimizer(finalParams, finalPopSize)\n        .then(output => {\n            if(mounted) {\n                setOutput(output);\n                setFinished(true);\n                setRunning(false);\n            }\n        }).catch(err => {\n            console.log(err);\n            //setWarning('An error occurred while connecting to the optimization server. Please try again.');\n            //setFinished(false);\n            //setRunning(false);\n        })\n        // Periodically check output\n        var interval = setInterval(async () => {\n            try {\n                var output = await getOutput(finalParams, finalPopSize, attempts, maxReattempts);\n                var elapsedTime = Date.now() - startTime;\n                console.log(output);\n                if(output.hasOwnProperty('status')) {\n                    if(output.status === 'error') {\n                        if(mounted) {\n                            //setAttempts(attempts + 1);\n                        }     \n                    }\n                }\n                else if(output.running === 'false') { \n                    console.log('done');\n                    if(mounted) {\n                        console.log('mounted');\n                        setOutput(output);\n                        setFinished(true);\n                        setRunning(false);\n                        console.log(running);\n                        clearInterval(interval);\n                        return () => mounted = false;\n                    }\n                }\n                // Timeout after 5 minutes\n                else if(elapsedTime > 300000) {\n                    throw new Error('Optimization run timeout');\n                }\n            }\n            catch(err) {\n                console.log(err);\n                if(elapsedTime > 300000) {\n                    setWarning('Optimization run timed out. Please try again.');\n                    clearInterval(interval);\n                    setFinished(false);\n                    setRunning(false);\n                }\n                \n            }\n        }, 5000);\n\n        //clearInterval(interval);\n\n        return () => {\n            mounted = false;\n            clearInterval(interval);\n        }\n    // eslint-disable-next-line \n    }, []);\n\n    return null;\n};\n\nexport default Optimizer;"]},"metadata":{},"sourceType":"module"}