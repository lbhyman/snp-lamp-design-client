{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useBetween } from 'use-between';\nimport { ShareablePopSizeState } from './PopSlider.js';\nimport { ShareableProbeParams, ShareableStartSignal, ShareableStopSignal } from './Buttons.js';\nimport NodeFetch from 'node-fetch';\nexport const ShareableRunningState = () => {\n  _s();\n\n  const [running, setRunning] = useState(false);\n  return {\n    running,\n    setRunning\n  };\n};\n\n_s(ShareableRunningState, \"GqSjlWMyRcFSNk6JAdDkMp9357M=\");\n\n_c = ShareableRunningState;\nexport const ShareableFinishedState = () => {\n  _s2();\n\n  const [finished, setFinished] = useState(false);\n  return {\n    finished,\n    setFinished\n  };\n};\n\n_s2(ShareableFinishedState, \"mZBoEqN32gr4012eGv/dCEBa7uo=\");\n\n_c2 = ShareableFinishedState;\nexport const ShareableGAProgressState = () => {\n  _s3();\n\n  const [GAProgress, setGAProgress] = useState(0);\n  return {\n    GAProgress,\n    setGAProgress\n  };\n};\n\n_s3(ShareableGAProgressState, \"NNJRei+Z2luInje77Z08KK60zQE=\");\n\n_c3 = ShareableGAProgressState;\nexport const ShareableOutputState = () => {\n  _s4();\n\n  const [output, setOutput] = useState();\n  return {\n    output,\n    setOutput\n  };\n};\n\n_s4(ShareableOutputState, \"WnuMlFXT1y2OZOxPABl/NBYju+4=\");\n\n_c4 = ShareableOutputState;\nconst endPointAddress = 'http://127.0.0.1:8000'; // TODO: Use environment variable\n\nconst Optimizer = () => {\n  _s5();\n\n  const {\n    probeParams\n  } = useBetween(ShareableProbeParams);\n  const {\n    startSignal,\n    setStartSignal\n  } = useBetween(ShareableStartSignal);\n  const {\n    stopSignal,\n    setStopSignal\n  } = useBetween(ShareableStopSignal);\n  const {\n    running,\n    setRunning\n  } = useBetween(ShareableRunningState);\n  const {\n    setFinished\n  } = useBetween(ShareableFinishedState);\n  const {\n    GAProgress,\n    setGAProgress\n  } = useBetween(ShareableGAProgressState);\n  const {\n    setOutput\n  } = useBetween(ShareableOutputState);\n  const {\n    popSize\n  } = useBetween(ShareablePopSizeState);\n  const [probePopulation, setProbePopulation] = useState([]);\n  const [finalProbe, setFinalProbe] = useState();\n  const [currParams, setCurrParams] = useState(probeParams);\n  const [count, setCount] = useState(0);\n\n  const reset = () => {\n    setProbePopulation([]);\n    setFinalProbe(null);\n    setRunning(false);\n    setFinished(false);\n    setGAProgress(0);\n    setOutput(null);\n  };\n\n  const generateInitialGAPopulation = () => {\n    var endPoint = endPointAddress.concat('/generate_initial_population');\n    console.log(endPoint);\n    var params = {\n      popSize: popSize,\n      probeParams: currParams\n    };\n    NodeFetch(endPoint, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify(params)\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      setProbePopulation(json);\n    });\n  };\n\n  const generateNextGAPopulation = () => {\n    var endPoint = endPointAddress.concat('/generate_next_population');\n    NodeFetch(endPoint, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify(probePopulation)\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      setProbePopulation(json);\n    });\n  };\n\n  const generateNextHillClimbingSteps = () => {\n    var endPoint = endPointAddress.concat('/hill_climbing_options');\n    NodeFetch(endPoint, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify(probePopulation)\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      setProbePopulation(json);\n    });\n  };\n\n  const calculateProbeFitness = probe => {\n    var endPoint = endPointAddress.concat('/calculate_fitness');\n    NodeFetch(endPoint, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: 'POST',\n      body: JSON.stringify(probe)\n    }).then(function (response) {\n      return response.json();\n    });\n  };\n\n  const calculatePopulationFitness = () => {\n    var currPopulation = probePopulation;\n\n    for (var i = 0; i < currPopulation.length; i++) {\n      if (!running) {\n        reset();\n        return null;\n      }\n\n      var currProbe = currPopulation[i];\n\n      if (currProbe.beta[0] !== 0) {\n        currPopulation[i] = calculateProbeFitness(currProbe);\n      }\n\n      setGAProgress(GAProgress + 1);\n    }\n\n    setProbePopulation(currPopulation);\n  };\n\n  const getBestProbe = () => {\n    var bestProbe = probePopulation[0];\n\n    for (var i = 0; i < probePopulation.length; i++) {\n      var currProbe = probePopulation[i];\n\n      if (currProbe.beta[0] > bestProbe.beta[0]) {\n        bestProbe = currProbe;\n      }\n    }\n\n    return bestProbe;\n  };\n\n  const runGA = () => {\n    generateInitialGAPopulation();\n    calculatePopulationFitness();\n\n    while (probePopulation.length > 1 && count < 100) {\n      generateNextGAPopulation();\n      calculatePopulationFitness();\n      setCount(count + 1);\n    }\n\n    calculatePopulationFitness();\n  };\n\n  const runHillClimbing = () => {\n    var bestProbe = getBestProbe();\n    generateNextHillClimbingSteps();\n    calculatePopulationFitness();\n    var newProbe = getBestProbe();\n\n    while (newProbe.beta[0] > bestProbe.beta[0] && probePopulation.length > 1) {\n      bestProbe = newProbe;\n      generateNextHillClimbingSteps();\n      calculatePopulationFitness();\n      newProbe = getBestProbe();\n    }\n\n    setFinalProbe(bestProbe);\n  };\n\n  const run = () => {\n    reset();\n    setRunning(true);\n    setFinished(false);\n    runGA(); //runHillClimbing();\n\n    if (probePopulation.length > 0) {\n      setFinished(true);\n      setOutput(finalProbe);\n    }\n\n    setRunning(false);\n  };\n\n  if (startSignal) {\n    setStartSignal(false);\n    setCurrParams(probeParams.__dict__);\n    run();\n  }\n\n  ;\n\n  if (stopSignal) {\n    setStopSignal(false);\n    reset();\n  }\n\n  ;\n  return null;\n};\n\n_s5(Optimizer, \"h+5Ko7H4uH+8Jm70Xh90jZHpKdE=\", false, function () {\n  return [useBetween, useBetween, useBetween, useBetween, useBetween, useBetween, useBetween, useBetween];\n});\n\n_c5 = Optimizer;\nexport default Optimizer;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"ShareableRunningState\");\n$RefreshReg$(_c2, \"ShareableFinishedState\");\n$RefreshReg$(_c3, \"ShareableGAProgressState\");\n$RefreshReg$(_c4, \"ShareableOutputState\");\n$RefreshReg$(_c5, \"Optimizer\");","map":{"version":3,"sources":["/home/leland/MLPractice/snp-lamp-design-client/src/Optimizer.js"],"names":["useState","useBetween","ShareablePopSizeState","ShareableProbeParams","ShareableStartSignal","ShareableStopSignal","NodeFetch","ShareableRunningState","running","setRunning","ShareableFinishedState","finished","setFinished","ShareableGAProgressState","GAProgress","setGAProgress","ShareableOutputState","output","setOutput","endPointAddress","Optimizer","probeParams","startSignal","setStartSignal","stopSignal","setStopSignal","popSize","probePopulation","setProbePopulation","finalProbe","setFinalProbe","currParams","setCurrParams","count","setCount","reset","generateInitialGAPopulation","endPoint","concat","console","log","params","headers","method","body","JSON","stringify","then","response","json","generateNextGAPopulation","generateNextHillClimbingSteps","calculateProbeFitness","probe","calculatePopulationFitness","currPopulation","i","length","currProbe","beta","getBestProbe","bestProbe","runGA","runHillClimbing","newProbe","run","__dict__"],"mappings":";;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,qBAAT,QAAsC,gBAAtC;AACA,SAASC,oBAAT,EAA+BC,oBAA/B,EAAqDC,mBAArD,QAAgF,cAAhF;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAO,MAAMC,qBAAqB,GAAG,MAAM;AAAA;;AACvC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,KAAD,CAAtC;AACA,SAAO;AACHQ,IAAAA,OADG;AAEHC,IAAAA;AAFG,GAAP;AAIH,CANM;;GAAMF,qB;;KAAAA,qB;AAQb,OAAO,MAAMG,sBAAsB,GAAG,MAAM;AAAA;;AACxC,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAC,KAAD,CAAxC;AACA,SAAO;AACHW,IAAAA,QADG;AAEHC,IAAAA;AAFG,GAAP;AAIH,CANM;;IAAMF,sB;;MAAAA,sB;AAQb,OAAO,MAAMG,wBAAwB,GAAG,MAAM;AAAA;;AAC1C,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,CAAD,CAA5C;AACA,SAAO;AACHc,IAAAA,UADG;AAEHC,IAAAA;AAFG,GAAP;AAIH,CANM;;IAAMF,wB;;MAAAA,wB;AAQb,OAAO,MAAMG,oBAAoB,GAAG,MAAM;AAAA;;AACtC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,EAApC;AACA,SAAO;AACHiB,IAAAA,MADG;AAEHC,IAAAA;AAFG,GAAP;AAIH,CANM;;IAAMF,oB;;MAAAA,oB;AAQb,MAAMG,eAAe,GAAG,uBAAxB,C,CAAiD;;AAEjD,MAAMC,SAAS,GAAG,MAAM;AAAA;;AAEpB,QAAM;AAAEC,IAAAA;AAAF,MAAkBpB,UAAU,CAACE,oBAAD,CAAlC;AACA,QAAM;AAAEmB,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAkCtB,UAAU,CAACG,oBAAD,CAAlD;AACA,QAAM;AAAEoB,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAAgCxB,UAAU,CAACI,mBAAD,CAAhD;AACA,QAAM;AAAEG,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAA0BR,UAAU,CAACM,qBAAD,CAA1C;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAkBX,UAAU,CAACS,sBAAD,CAAlC;AACA,QAAM;AAAEI,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAAgCd,UAAU,CAACY,wBAAD,CAAhD;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAgBjB,UAAU,CAACe,oBAAD,CAAhC;AACA,QAAM;AAAEU,IAAAA;AAAF,MAAczB,UAAU,CAACC,qBAAD,CAA9B;AACA,QAAM,CAACyB,eAAD,EAAkBC,kBAAlB,IAAwC5B,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAAC6B,UAAD,EAAaC,aAAb,IAA8B9B,QAAQ,EAA5C;AACA,QAAM,CAAC+B,UAAD,EAAaC,aAAb,IAA8BhC,QAAQ,CAACqB,WAAD,CAA5C;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBlC,QAAQ,CAAC,CAAD,CAAlC;;AAEA,QAAMmC,KAAK,GAAG,MAAM;AAChBP,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAE,IAAAA,aAAa,CAAC,IAAD,CAAb;AACArB,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAG,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAG,IAAAA,aAAa,CAAC,CAAD,CAAb;AACAG,IAAAA,SAAS,CAAC,IAAD,CAAT;AACH,GAPD;;AASA,QAAMkB,2BAA2B,GAAG,MAAM;AACtC,QAAIC,QAAQ,GAAGlB,eAAe,CAACmB,MAAhB,CAAuB,8BAAvB,CAAf;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,QAAII,MAAM,GAAG;AACTf,MAAAA,OAAO,EAAEA,OADA;AAETL,MAAAA,WAAW,EAAEU;AAFJ,KAAb;AAIAzB,IAAAA,SAAS,CAAC+B,QAAD,EACT;AACIK,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OADb;AAEIC,MAAAA,MAAM,EAAE,MAFZ;AAGIC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,MAAf;AAHV,KADS,CAAT,CAKGM,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAPD,EAOGF,IAPH,CAOQ,UAAUE,IAAV,EAAgB;AACpBrB,MAAAA,kBAAkB,CAACqB,IAAD,CAAlB;AACH,KATD;AAUH,GAjBD;;AAmBA,QAAMC,wBAAwB,GAAG,MAAM;AACnC,QAAIb,QAAQ,GAAGlB,eAAe,CAACmB,MAAhB,CAAuB,2BAAvB,CAAf;AACAhC,IAAAA,SAAS,CAAC+B,QAAD,EACT;AACIK,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OADb;AAEIC,MAAAA,MAAM,EAAE,MAFZ;AAGIC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAenB,eAAf;AAHV,KADS,CAAT,CAKGoB,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAPD,EAOGF,IAPH,CAOQ,UAAUE,IAAV,EAAgB;AACpBrB,MAAAA,kBAAkB,CAACqB,IAAD,CAAlB;AACH,KATD;AAUH,GAZD;;AAcA,QAAME,6BAA6B,GAAG,MAAM;AACxC,QAAId,QAAQ,GAAGlB,eAAe,CAACmB,MAAhB,CAAuB,wBAAvB,CAAf;AACAhC,IAAAA,SAAS,CAAC+B,QAAD,EACT;AACIK,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OADb;AAEIC,MAAAA,MAAM,EAAE,MAFZ;AAGIC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAenB,eAAf;AAHV,KADS,CAAT,CAKGoB,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAPD,EAOGF,IAPH,CAOQ,UAAUE,IAAV,EAAgB;AACpBrB,MAAAA,kBAAkB,CAACqB,IAAD,CAAlB;AACH,KATD;AAUH,GAZD;;AAcA,QAAMG,qBAAqB,GAAIC,KAAD,IAAW;AACrC,QAAIhB,QAAQ,GAAGlB,eAAe,CAACmB,MAAhB,CAAuB,oBAAvB,CAAf;AACAhC,IAAAA,SAAS,CAAC+B,QAAD,EACT;AACIK,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OADb;AAEIC,MAAAA,MAAM,EAAE,MAFZ;AAGIC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeO,KAAf;AAHV,KADS,CAAT,CAKGN,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAPD;AAQH,GAVD;;AAYA,QAAMK,0BAA0B,GAAG,MAAM;AACrC,QAAIC,cAAc,GAAG5B,eAArB;;AACA,SAAK,IAAI6B,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACD,cAAc,CAACE,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,UAAG,CAAChD,OAAJ,EAAa;AACT2B,QAAAA,KAAK;AACL,eAAO,IAAP;AACH;;AACD,UAAIuB,SAAS,GAAGH,cAAc,CAACC,CAAD,CAA9B;;AACA,UAAIE,SAAS,CAACC,IAAV,CAAe,CAAf,MAAsB,CAA1B,EAA6B;AACzBJ,QAAAA,cAAc,CAACC,CAAD,CAAd,GAAoBJ,qBAAqB,CAACM,SAAD,CAAzC;AACH;;AACD3C,MAAAA,aAAa,CAACD,UAAU,GAAG,CAAd,CAAb;AACH;;AACDc,IAAAA,kBAAkB,CAAC2B,cAAD,CAAlB;AACH,GAdD;;AAgBA,QAAMK,YAAY,GAAG,MAAM;AACvB,QAAIC,SAAS,GAAGlC,eAAe,CAAC,CAAD,CAA/B;;AACA,SAAK,IAAI6B,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC7B,eAAe,CAAC8B,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,UAAIE,SAAS,GAAG/B,eAAe,CAAC6B,CAAD,CAA/B;;AACA,UAAIE,SAAS,CAACC,IAAV,CAAe,CAAf,IAAoBE,SAAS,CAACF,IAAV,CAAe,CAAf,CAAxB,EAA2C;AACvCE,QAAAA,SAAS,GAAGH,SAAZ;AACH;AACJ;;AACD,WAAOG,SAAP;AACH,GATD;;AAWA,QAAMC,KAAK,GAAG,MAAM;AAChB1B,IAAAA,2BAA2B;AAC3BkB,IAAAA,0BAA0B;;AAC1B,WAAO3B,eAAe,CAAC8B,MAAhB,GAAyB,CAAzB,IAA8BxB,KAAK,GAAG,GAA7C,EAAkD;AAC9CiB,MAAAA,wBAAwB;AACxBI,MAAAA,0BAA0B;AAC1BpB,MAAAA,QAAQ,CAACD,KAAK,GAAG,CAAT,CAAR;AACH;;AACDqB,IAAAA,0BAA0B;AAC7B,GATD;;AAWA,QAAMS,eAAe,GAAG,MAAM;AAC1B,QAAIF,SAAS,GAAGD,YAAY,EAA5B;AACAT,IAAAA,6BAA6B;AAC7BG,IAAAA,0BAA0B;AAC1B,QAAIU,QAAQ,GAAGJ,YAAY,EAA3B;;AACA,WAAOI,QAAQ,CAACL,IAAT,CAAc,CAAd,IAAmBE,SAAS,CAACF,IAAV,CAAe,CAAf,CAAnB,IAAwChC,eAAe,CAAC8B,MAAhB,GAAyB,CAAxE,EAA2E;AACvEI,MAAAA,SAAS,GAAGG,QAAZ;AACAb,MAAAA,6BAA6B;AAC7BG,MAAAA,0BAA0B;AAC1BU,MAAAA,QAAQ,GAAGJ,YAAY,EAAvB;AACH;;AACD9B,IAAAA,aAAa,CAAC+B,SAAD,CAAb;AACH,GAZD;;AAcA,QAAMI,GAAG,GAAG,MAAM;AACd9B,IAAAA,KAAK;AACL1B,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAG,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAkD,IAAAA,KAAK,GAJS,CAKd;;AACA,QAAInC,eAAe,CAAC8B,MAAhB,GAAyB,CAA7B,EAAgC;AAC5B7C,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAM,MAAAA,SAAS,CAACW,UAAD,CAAT;AACH;;AACDpB,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAXD;;AAaA,MAAIa,WAAJ,EAAiB;AACbC,IAAAA,cAAc,CAAC,KAAD,CAAd;AACAS,IAAAA,aAAa,CAACX,WAAW,CAAC6C,QAAb,CAAb;AACAD,IAAAA,GAAG;AACN;;AAAA;;AAED,MAAIzC,UAAJ,EAAgB;AACZC,IAAAA,aAAa,CAAC,KAAD,CAAb;AACAU,IAAAA,KAAK;AACR;;AAAA;AAED,SAAO,IAAP;AACH,CAhKD;;IAAMf,S;UAEsBnB,U,EACgBA,U,EACFA,U,EACNA,U,EACRA,U,EACcA,U,EAChBA,U,EACFA,U;;;MATlBmB,S;AAkKN,eAAeA,SAAf","sourcesContent":["import { useState } from 'react';\nimport { useBetween } from 'use-between';\nimport { ShareablePopSizeState } from './PopSlider.js';\nimport { ShareableProbeParams, ShareableStartSignal, ShareableStopSignal } from './Buttons.js';  \nimport NodeFetch from 'node-fetch';\n\nexport const ShareableRunningState = () => {\n    const [running, setRunning] = useState(false);\n    return {\n        running,\n        setRunning\n    };\n};\n\nexport const ShareableFinishedState = () => {\n    const [finished, setFinished] = useState(false);\n    return {\n        finished,\n        setFinished\n    };\n};\n\nexport const ShareableGAProgressState = () => {\n    const [GAProgress, setGAProgress] = useState(0);\n    return {\n        GAProgress,\n        setGAProgress\n    };    \n};\n\nexport const ShareableOutputState = () => {\n    const [output, setOutput] = useState();\n    return {\n        output,\n        setOutput\n    };    \n};\n\nconst endPointAddress = 'http://127.0.0.1:8000'; // TODO: Use environment variable\n\nconst Optimizer = () => {\n\n    const { probeParams } = useBetween(ShareableProbeParams);\n    const { startSignal, setStartSignal } = useBetween(ShareableStartSignal);\n    const { stopSignal, setStopSignal } = useBetween(ShareableStopSignal);\n    const { running, setRunning } = useBetween(ShareableRunningState);\n    const { setFinished } = useBetween(ShareableFinishedState);\n    const { GAProgress, setGAProgress } = useBetween(ShareableGAProgressState);\n    const { setOutput } = useBetween(ShareableOutputState);\n    const { popSize } = useBetween(ShareablePopSizeState);\n    const [probePopulation, setProbePopulation] = useState([]);\n    const [finalProbe, setFinalProbe] = useState();\n    const [currParams, setCurrParams] = useState(probeParams);\n    const [count, setCount] = useState(0);\n\n    const reset = () => {\n        setProbePopulation([]);\n        setFinalProbe(null);\n        setRunning(false);\n        setFinished(false);\n        setGAProgress(0);\n        setOutput(null);\n    };\n\n    const generateInitialGAPopulation = () => {\n        var endPoint = endPointAddress.concat('/generate_initial_population');\n        console.log(endPoint);\n        var params = {\n            popSize: popSize,\n            probeParams: currParams\n        }\n        NodeFetch(endPoint,\n        {\n            headers: { 'Content-Type': 'application/json' },\n            method: 'POST',\n            body: JSON.stringify(params)\n        }).then(function (response) {\n            return response.json();\n        }).then(function (json) {\n            setProbePopulation(json);\n        })\n    };\n\n    const generateNextGAPopulation = () => {\n        var endPoint = endPointAddress.concat('/generate_next_population');\n        NodeFetch(endPoint,\n        {\n            headers: { 'Content-Type': 'application/json' },\n            method: 'POST',\n            body: JSON.stringify(probePopulation)\n        }).then(function (response) {\n            return response.json();\n        }).then(function (json) {\n            setProbePopulation(json);\n        })\n    };\n\n    const generateNextHillClimbingSteps = () => {\n        var endPoint = endPointAddress.concat('/hill_climbing_options');\n        NodeFetch(endPoint,\n        {\n            headers: { 'Content-Type': 'application/json' },\n            method: 'POST',\n            body: JSON.stringify(probePopulation)\n        }).then(function (response) {\n            return response.json();\n        }).then(function (json) {\n            setProbePopulation(json);\n        })\n    };\n\n    const calculateProbeFitness = (probe) => {\n        var endPoint = endPointAddress.concat('/calculate_fitness');\n        NodeFetch(endPoint,\n        {\n            headers: { 'Content-Type': 'application/json' },\n            method: 'POST',\n            body: JSON.stringify(probe)\n        }).then(function (response) {\n            return response.json();\n        })\n    };\n\n    const calculatePopulationFitness = () => {\n        var currPopulation = probePopulation;\n        for (var i=0; i<currPopulation.length; i++) {\n            if(!running) {\n                reset();\n                return null;\n            }\n            var currProbe = currPopulation[i];\n            if (currProbe.beta[0] !== 0) {\n                currPopulation[i] = calculateProbeFitness(currProbe);\n            }\n            setGAProgress(GAProgress + 1);\n        }   \n        setProbePopulation(currPopulation);\n    };\n\n    const getBestProbe = () => {\n        var bestProbe = probePopulation[0];\n        for (var i=0; i<probePopulation.length; i++) {\n            var currProbe = probePopulation[i];\n            if (currProbe.beta[0] > bestProbe.beta[0]) {\n                bestProbe = currProbe;\n            }\n        }\n        return bestProbe;\n    };\n\n    const runGA = () => {\n        generateInitialGAPopulation();\n        calculatePopulationFitness();\n        while (probePopulation.length > 1 && count < 100) {\n            generateNextGAPopulation();\n            calculatePopulationFitness();\n            setCount(count + 1)\n        }\n        calculatePopulationFitness();\n    };\n\n    const runHillClimbing = () => {\n        var bestProbe = getBestProbe();\n        generateNextHillClimbingSteps();\n        calculatePopulationFitness();\n        var newProbe = getBestProbe();\n        while (newProbe.beta[0] > bestProbe.beta[0] && probePopulation.length > 1) {\n            bestProbe = newProbe;\n            generateNextHillClimbingSteps();\n            calculatePopulationFitness();\n            newProbe = getBestProbe();\n        }\n        setFinalProbe(bestProbe);\n    };\n\n    const run = () => {\n        reset();\n        setRunning(true);\n        setFinished(false);\n        runGA();\n        //runHillClimbing();\n        if (probePopulation.length > 0) {\n            setFinished(true);\n            setOutput(finalProbe);\n        }\n        setRunning(false);\n    };\n\n    if (startSignal) {\n        setStartSignal(false);\n        setCurrParams(probeParams.__dict__);\n        run();\n    };\n\n    if (stopSignal) {\n        setStopSignal(false);\n        reset();\n    };\n\n    return null;\n};\n\nexport default Optimizer;"]},"metadata":{},"sourceType":"module"}